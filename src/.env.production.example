# =============================================================================
# PetCare Companion - Production Environment Configuration
# =============================================================================
# This file contains production-safe defaults. Copy to .env and customize.
# SECURITY: Never commit actual secrets to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# Application Configuration
# -----------------------------------------------------------------------------
APP_NAME=PetCareCompanion
APP_ENV=production
APP_KEY=                                    # REQUIRED: Generate with `php artisan key:generate`
APP_DEBUG=false                             # MUST be false in production
APP_URL=https://petcare.example.com         # REQUIRED: Your production domain

APP_LOCALE=en
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=en_US

APP_MAINTENANCE_DRIVER=file

BCRYPT_ROUNDS=12

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
LOG_CHANNEL=stack
LOG_STACK=daily                             # Recommended: daily rotation
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=warning                           # production: warning or error

# -----------------------------------------------------------------------------
# Database Configuration (External MySQL Required)
# -----------------------------------------------------------------------------
DB_CONNECTION=mysql
DB_HOST=your-mysql-host.example.com         # REQUIRED: External MySQL host
DB_PORT=3306
DB_DATABASE=petcare                         # REQUIRED: Database name
DB_USERNAME=petcare_user                    # REQUIRED: Database user
DB_PASSWORD=                                # REQUIRED: Strong password

# -----------------------------------------------------------------------------
# Session Configuration
# -----------------------------------------------------------------------------
SESSION_DRIVER=database                     # Recommended for horizontal scaling
SESSION_LIFETIME=120
SESSION_ENCRYPT=true                        # Enable encryption in production
SESSION_PATH=/
SESSION_DOMAIN=.example.com                 # REQUIRED: Match your domain (with leading dot for subdomains)
SESSION_SECURE_COOKIE=true                  # MUST be true with HTTPS
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=lax

# -----------------------------------------------------------------------------
# Broadcasting, Filesystem, and Queue Configuration
# -----------------------------------------------------------------------------
BROADCAST_CONNECTION=log
FILESYSTEM_DISK=public                      # Use 's3' for external storage
QUEUE_CONNECTION=redis                      # Recommended: redis for production

# -----------------------------------------------------------------------------
# Cache Configuration (External Redis Required)
# -----------------------------------------------------------------------------
CACHE_STORE=redis                           # Recommended for performance
CACHE_PREFIX=petcare_

REDIS_CLIENT=phpredis
REDIS_HOST=your-redis-host.example.com      # REQUIRED: External Redis host
REDIS_PASSWORD=                             # REQUIRED: Strong Redis password
REDIS_PORT=6379

# -----------------------------------------------------------------------------
# Mail Configuration
# -----------------------------------------------------------------------------
MAIL_MAILER=smtp                            # REQUIRED: Configure your mail service
MAIL_HOST=smtp.example.com                  # REQUIRED: Your SMTP host
MAIL_PORT=587
MAIL_USERNAME=                              # REQUIRED: SMTP username
MAIL_PASSWORD=                              # REQUIRED: SMTP password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS="noreply@example.com"     # REQUIRED: Your sending email
MAIL_FROM_NAME="${APP_NAME}"

# -----------------------------------------------------------------------------
# S3/Object Storage (Optional but Recommended for Production)
# -----------------------------------------------------------------------------
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=
AWS_USE_PATH_STYLE_ENDPOINT=false

# -----------------------------------------------------------------------------
# Sanctum SPA Authentication
# -----------------------------------------------------------------------------
# CRITICAL: Must include your frontend domain(s)
SANCTUM_STATEFUL_DOMAINS=petcare.example.com,www.petcare.example.com

# CORS Configuration
FRONTEND_URL=https://petcare.example.com    # REQUIRED: Your frontend URL

# -----------------------------------------------------------------------------
# Third-Party Services
# -----------------------------------------------------------------------------
# Stripe (Payment Processing)
STRIPE_KEY=                                 # REQUIRED: Live publishable key (pk_live_...)
STRIPE_SECRET=                              # REQUIRED: Live secret key (sk_live_...)
STRIPE_WEBHOOK_SECRET=                      # REQUIRED: Webhook signing secret (whsec_...)

# Twilio (SMS Notifications)
TWILIO_ACCOUNT_SID=                         # REQUIRED: Account SID
TWILIO_AUTH_TOKEN=                          # REQUIRED: Auth token
TWILIO_PHONE_NUMBER=                        # REQUIRED: Verified phone number

# -----------------------------------------------------------------------------
# Production Optimization
# -----------------------------------------------------------------------------
# PHP OPcache Configuration (set via Docker ENV in app.Dockerfile)
# These are documented here for reference:
# PHP_OPCACHE_ENABLE=1
# PHP_OPCACHE_MEMORY_CONSUMPTION=128
# PHP_OPCACHE_MAX_ACCELERATED_FILES=10000
# PHP_OPCACHE_VALIDATE_TIMESTAMPS=0

# -----------------------------------------------------------------------------
# Security Headers (Applied by Nginx)
# -----------------------------------------------------------------------------
# The following headers are configured in docker/nginx.prod.conf:
# - X-Frame-Options: SAMEORIGIN
# - X-Content-Type-Options: nosniff
# - X-XSS-Protection: 1; mode=block
# - Referrer-Policy: no-referrer-when-downgrade

# -----------------------------------------------------------------------------
# Required Environment Variables Checklist
# -----------------------------------------------------------------------------
# Before deploying, ensure the following are set:
#
# [x] APP_KEY                    - Generate with artisan key:generate
# [x] APP_URL                    - Your production domain with HTTPS
# [x] DB_HOST, DB_DATABASE       - External MySQL connection
# [x] DB_USERNAME, DB_PASSWORD   - Database credentials
# [x] REDIS_HOST, REDIS_PASSWORD - External Redis connection
# [x] SESSION_DOMAIN             - Match your domain
# [x] SANCTUM_STATEFUL_DOMAINS   - Include all frontend domains
# [x] FRONTEND_URL               - Frontend application URL
# [x] MAIL_*                     - SMTP configuration
# [x] STRIPE_*                   - Live Stripe keys
# [x] TWILIO_*                   - Twilio credentials
#
# Optional but recommended:
# [ ] AWS_*                      - S3 for file storage
# [ ] Custom LOG_LEVEL           - Set to 'error' for production
